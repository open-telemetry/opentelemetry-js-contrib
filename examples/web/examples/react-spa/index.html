<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React SPA - OpenTelemetry Navigation Demo</title>
    <style>
      /* Reset and base styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        background-color: #f5f5f5;
      }

      /* Loading spinner */
      .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        flex-direction: column;
      }

      .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 1rem;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        color: #666;
        font-size: 1.1rem;
      }

      /* Hide loading when React app loads */
      #root:not(:empty) + .loading {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- React app will mount here -->
    <div id="root"></div>

    <!-- Loading indicator shown while React app loads -->
    <div class="loading">
      <div class="spinner"></div>
      <div class="loading-text">Loading React SPA Navigation Demo...</div>
    </div>

    <!-- OpenTelemetry and React app bundle -->
    <script type="text/javascript" src="/react-spa.js"></script>

    <script>
      // Add some global debugging helpers
      window.addEventListener('load', () => {
        console.log(
          'üéØ Page loaded - Navigation instrumentation should be active'
        );

        // Log initial page load
        console.log('üìç Initial URL:', window.location.href);

        // Add keyboard shortcuts for testing
        document.addEventListener('keydown', e => {
          if (e.ctrlKey || e.metaKey) {
            switch (e.key) {
              case '1':
                e.preventDefault();
                window.otelDebug?.testNavigation('/');
                break;
              case '2':
                e.preventDefault();
                window.otelDebug?.testNavigation('/about');
                break;
              case '3':
                e.preventDefault();
                window.otelDebug?.testNavigation('/products');
                break;
              case '4':
                e.preventDefault();
                window.otelDebug?.testNavigation('/contact');
                break;
              case 'h':
                e.preventDefault();
                window.otelDebug?.testHashNavigation('#test-section');
                break;
            }
          }
        });

        console.log('‚å®Ô∏è  Keyboard shortcuts available:');
        console.log('   Ctrl/Cmd + 1-4: Navigate to pages');
        console.log('   Ctrl/Cmd + H: Test hash navigation');
      });

      // Track navigation performance
      if ('navigation' in window.performance) {
        window.addEventListener('load', () => {
          const navTiming = performance.getEntriesByType('navigation')[0];
          console.log('‚è±Ô∏è  Navigation timing:', {
            domContentLoaded:
              navTiming.domContentLoadedEventEnd -
              navTiming.domContentLoadedEventStart,
            loadComplete: navTiming.loadEventEnd - navTiming.loadEventStart,
            totalTime: navTiming.loadEventEnd - navTiming.fetchStart,
          });
        });
      }

      // Monitor hash changes
      window.addEventListener('hashchange', e => {
        console.log('üîó Hash changed:', {
          from: e.oldURL,
          to: e.newURL,
          hash: window.location.hash,
        });
      });

      // Monitor popstate events
      window.addEventListener('popstate', e => {
        console.log('‚¨ÖÔ∏è  Popstate event:', {
          state: e.state,
          url: window.location.href,
        });
      });
    </script>
  </body>
</html>
